<section class="add-product">
<h2 class="add-product__title">
  {{ product?.id ? 'ูุฑุงุด ูุญุตูู' : 'ุงูุฒูุฏู ูุญุตูู ุฌุฏุฏ' }}
</h2>
    <form [formGroup]="form" (ngSubmit)="save()" class="product__form">



 <div class="form-group">
            <label class="form-label">ุขูพููุฏ ุชุตุงูุฑ</label>

            <label class="upload-wrapper" 
                    (drop)="onFileDrop($event)" 
                    (dragover)="onDragOver($event)"
                    (dragleave)="onDragLeave($event)"> <!-- ุงุถุงูู ฺฉุฑุฏู dragleave -->
                <div class="upload-area" [class.drag-over]="isDragOver">
                    <div class="upload-content">
                        <i>๐</i>
                        <div class="upload-text">ุจุฑุง ุขูพููุฏ ฺฉูฺฉ ฺฉูุฏ ุง ูุงูโูุง ุฑุง ุงูุฌุง ุจฺฉุดุฏ</div>
                        <span>ูุฑูุชโูุง ูุฌุงุฒ: JPG, PNG, GIF, WebP</span>
                    </div>
                </div>
                <input id="imageUpload" type="file" multiple accept="image/*" class="file-input" 
                       (change)="onFileChange($event)" /> <!-- ุงุถุงูู ฺฉุฑุฏู event change -->
            </label>
        </div>

        <div class="preview-list" *ngIf="selectedFiles.length > 0">
            <div class="preview-item" *ngFor="let file of selectedFiles; let i = index">
                <img [src]="file.preview" class="preview-thumb" [class.blur]="file.isUploading" alt="preview" />

                <div *ngIf="file.isUploading" class="loading-overlay">
                    <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" width="40px" height="40px"
                        viewBox="0 0 50 50">
                        <path fill="#000"
                            d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">
                            <animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25"
                                dur="0.6s" repeatCount="indefinite" />
                        </path>
                    </svg>
                </div>

                <div *ngIf="file.uploadError" class="status error">
                    โ ุฎุทุง ุฏุฑ ุขูพููุฏ
                </div>

                <button type="button" class="btn btn--remove" (click)="removeFile(i)">
                    ร
                </button>
            </div>
        </div>


        <div class="form-group">
            <label class="form-label">ูุงู ูุญุตูู</label>
            <input class="form-input" formControlName="productName" />
        </div>

        <div class="form-group">
            <label class="form-label">ุงุณูุงฺฏ</label>
            <input type="string" class="form-input" formControlName="slug" />
        </div>

        <div class="form-group">
            <label class="form-label">ฺฉุฏ ูุญุตูู</label>
            <input class="form-input" formControlName="productCode" />
        </div>

        <div class="form-group">
            <label class="form-label">ููุช</label>
            <input type="number" class="form-input" formControlName="price" />
        </div>

        <div class="form-group">
            <label class="form-label">ุชุนุฏุงุฏ</label>
            <input type="number" class="form-input" formControlName="quantity" />
        </div>


        <div class="form-group">
            <label class="form-label">ุชูุถุญุงุช</label>
            <textarea class="form-textarea" formControlName="description"></textarea>
        </div>


        <div class="form-group">
            <label class="form-label">ูุถุนุช ูุญุตูู</label>
            <select class="form-input" formControlName="status">
                <option value="true">ูุนุงู</option>
                <option value="false">ุบุฑูุนุงู</option>
            </select>
        </div>

        <div class="form-group">
            <label class="form-label">ูุถุนุช ุชุฎูู</label>
            <select class="form-input" formControlName="active_discount">
                <option value="false">ุจุฏูู ุชุฎูู</option>
                <option value="true">ุฏุงุฑุง ุชุฎูู</option>
            </select>
        </div>

        <label class="form-label">ูฺฺฏโูุง</label>
        <div class="form-section form-section--features" formArrayName="details">
            <div *ngFor="let feature of details.controls; let i = index" [formGroupName]="i" class="feature-item">
                <input type="text" class="form-input" formControlName="key" placeholder="ูุงู ูฺฺฏ" />
                <input type="text" class="form-input" formControlName="value" placeholder="ููุฏุงุฑ ูฺฺฏ" />
                <button type="button" class="btn btn--remove-feature" (click)="removeFeature(i)">
                    ร
                </button>
            </div>

            <button type="button" class="btn btn--add" (click)="addFeature()">
                ุงูุฒูุฏู ูฺฺฏ
            </button>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn--primary">ุฐุฎุฑู</button>
            <button type="button " routerLink="{{router.MANAGEMENT}}" class="btn btn--secondary">ุงูุตุฑุงู</button>
        </div>

    </form>
</section>